<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: General Cross-Platform Development Tips</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Sat Sep 6 08:15:36 2008"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">wxWidgets 2.9.0: A portable C++ GUI toolkit</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="page_multiplatform">General Cross-Platform Development Tips </a></h1>This chapter describes some tips related to cross-platform development.<p>
<ul>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_includefiles">Include Files</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_libraries">Libraries</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_configuration">Configuration</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_makefiles">Makefiles</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_winresources">Windows Resource Files</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_allocatingobjects">Allocating and Deleting wxWidgets Objects</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_architecturedependency">Architecture Dependency</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_conditionalcompilation">Conditional Compilation</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_cpp">C++ Issues</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_filehandling">File Handling</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_reducingerr">Reducing Programming Errors</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_gui">GUI Design</a> </li>
<li><a class="el" href="page_multiplatform.html#page_multiplatform_debug">Debugging</a></li>
</ul>
<hr>
<h2><a class="anchor" name="page_multiplatform_includefiles">
Include Files</a></h2>
The main include file is <code>"wx/wx.h"</code>; this includes the most commonly used modules of wxWidgets.<p>
To save on compilation time, include only those header files relevant to the source file. If you are using <b>precompiled</b> headers, you should include the following section before any other includes:<p>
<div class="fragment"><pre class="fragment">
// For compilers that support precompilation, includes "wx.h".
#include &lt;wx/wxprec.h&gt;

#ifdef __BORLANDC__
#   pragma hdrstop
#endif

#ifndef WX_PRECOMP
    // Include your minimal set of headers here, or wx.h
#   include &lt;wx/wx.h&gt;
#endif

... now your other include files ...
</pre></div><p>
The file <code>"wx/wxprec.h"</code> includes <code>"wx/wx.h"</code>. Although this incantation may seem quirky, it is in fact the end result of a lot of experimentation, and several Windows compilers to use precompilation which is largely automatic for compilers with necessary support. Currently it is used for Visual C++ (including embedded Visual C++), Borland C++, Open Watcom C++, Digital Mars C++ and newer versions of GCC. Some compilers might need extra work from the application developer to set the build environment up as necessary for the support.<h2><a class="anchor" name="page_multiplatform_libraries">
Libraries</a></h2>
All ports of wxWidgets can create either a <b>static</b> library or a <b>shared</b> library.<p>
When a program is linked against a <em>static</em> library, the machine code from the object files for any external functions used by the program is copied from the library into the final executable.<p>
<em>Shared</em> libraries are handled with a more advanced form of linking, which makes the executable file smaller. They use the extension <code>".so"</code> (Shared Object) under Linux and <code>".dll"</code> (Dynamic Link Library) under Windows.<p>
An executable file linked against a shared library contains only a small table of the functions it requires, instead of the complete machine code from the object files for the external functions. Before the executable file starts running, the machine code for the external functions is copied into memory from the shared library file on disk by the operating system - a process referred to as <em>dynamic</em> linking.<p>
Dynamic linking makes executable files smaller and saves disk space, because one copy of a library can be shared between multiple programs. Most operating systems also provide a virtual memory mechanism which allows one copy of a shared library in physical memory to be used by all running programs, saving memory as well as disk space.<p>
Furthermore, shared libraries make it possible to update a library without recompiling the programs which use it (provided the interface to the library does not change).<p>
wxWidgets can also be built in <b>multilib</b> and <b>monolithic</b> variants. See the <a class="el" href="page_libs.html">Library List</a> for more information on these.<h2><a class="anchor" name="page_multiplatform_configuration">
Configuration</a></h2>
When using project files and makefiles directly to build wxWidgets, options are configurable in the file <code>"wx/XXX/setup.h"</code> where XXX is the required platform (such as <code>msw</code>, <code>motif</code>, <code>gtk</code>, <code>mac</code>).<p>
Some settings are a matter of taste, some help with platform-specific problems, and others can be set to minimize the size of the library. Please see the <code>"setup.h"</code> file and <code>"install.txt"</code> files for details on configuration.<p>
When using the <code>"configure"</code> script to configure wxWidgets (on Unix and other platforms where configure is available), the corresponding <code>"setup.h"</code> files are generated automatically along with suitable makefiles.<p>
When using the RPM packages (or DEB or other forms of <em>binaries</em>) for installing wxWidgets on Linux, a correct <code>"setup.h"</code> is shipped in the package and this must not be changed.<h2><a class="anchor" name="page_multiplatform_makefiles">
Makefiles</a></h2>
On Microsoft Windows, wxWidgets has a different set of makefiles for each compiler, because each compiler's <code>'make'</code> tool is slightly different. Popular Windows compilers that we cater for, and the corresponding makefile extensions, include: Microsoft Visual C++ (.vc), Borland C++ (.bcc), OpenWatcom C++ (.wat) and MinGW/Cygwin (.gcc). Makefiles are provided for the wxWidgets library itself, samples, demos, and utilities.<p>
On Linux, Mac and OS/2, you use the <code>'configure'</code> command to generate the necessary makefiles. You should also use this method when building with MinGW/Cygwin on Windows.<p>
We also provide project files for some compilers, such as Microsoft VC++. However, we recommend using makefiles to build the wxWidgets library itself, because makefiles can be more powerful and less manual intervention is required.<p>
On Windows using a compiler other than MinGW/Cygwin, you would build the wxWidgets library from the <code>"build/msw"</code> directory which contains the relevant makefiles.<p>
On Windows using MinGW/Cygwin, and on Unix, MacOS X and OS/2, you invoke 'configure' (found in the top-level of the wxWidgets source hierarchy), from within a suitable empty directory for containing makefiles, object files and libraries.<p>
For details on using makefiles, configure, and project files, please see <code>"docs/xxx/install.txt"</code> in your distribution, where <code>"xxx"</code> is the platform of interest, such as <code>msw</code>, <code>gtk</code>, <code>x11</code>, <code>mac</code>.<p>
All wxWidgets makefiles are generated using Bakefile &lt;<a href="http://www.bakefile.org/">http://www.bakefile.org/</a>&gt;. wxWidgets also provides (in the <code>"build/bakefiles/wxpresets"</code> folder) the wxWidgets bakefile presets. These files allow you to create bakefiles for your own wxWidgets-based applications very easily.<h2><a class="anchor" name="page_multiplatform_winresources">
Windows Resource Files</a></h2>
wxWidgets application compilation under MS Windows requires at least one extra file: a resource file.<p>
The least that must be defined in the Windows resource file (extension RC) is the following statement:<p>
<div class="fragment"><pre class="fragment">
#include "wx/msw/wx.rc"
</pre></div><p>
which includes essential internal wxWidgets definitions. The resource script may also contain references to icons, cursors, etc., for example:<p>
<div class="fragment"><pre class="fragment">
wxicon icon wx.ico
</pre></div><p>
The icon can then be referenced by name when creating a frame icon. See the Microsoft Windows SDK documentation.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Include "wx.rc" <em>after</em> any ICON statements so programs that search your executable for icons (such as the Program Manager) find your application icon first.</dd></dl>
<h2><a class="anchor" name="page_multiplatform_allocatingobjects">
Allocating and Deleting wxWidgets Objects</a></h2>
In general, classes derived from <a class="el" href="classwx_window.html">wxWindow</a> must dynamically allocated with <em>new</em> and deleted with <em>delete</em>. If you delete a window, all of its children and descendants will be automatically deleted, so you don't need to delete these descendants explicitly.<p>
When deleting a frame or dialog, use <b>Destroy</b> rather than <b>delete</b> so that the wxWidgets delayed deletion can take effect. This waits until idle time (when all messages have been processed) to actually delete the window, to avoid problems associated with the GUI sending events to deleted windows.<p>
Don't create a window on the stack, because this will interfere with delayed deletion.<p>
If you decide to allocate a C++ array of objects (such as <a class="el" href="classwx_bitmap.html">wxBitmap</a>) that may be cleaned up by wxWidgets, make sure you delete the array explicitly before wxWidgets has a chance to do so on exit, since calling <em>delete</em> on array members will cause memory problems.<p>
<a class="el" href="classwx_colour.html">wxColour</a> can be created statically: it is not automatically cleaned up and is unlikely to be shared between other objects; it is lightweight enough for copies to be made.<p>
Beware of deleting objects such as a <a class="el" href="classwx_pen.html">wxPen</a> or <a class="el" href="classwx_bitmap.html">wxBitmap</a> if they are still in use. Windows is particularly sensitive to this, so make sure you make calls like wxDC::SetPen(wxNullPen) or wxDC::SelectObject(wxNullBitmap) before deleting a drawing object that may be in use. Code that doesn't do this will probably work fine on some platforms, and then fail under Windows.<h2><a class="anchor" name="page_multiplatform_architecturedependency">
Architecture Dependency</a></h2>
A problem which sometimes arises from writing multi-platform programs is that the basic C types are not defined the same on all platforms. This holds true for both the length in bits of the standard types (such as int and long) as well as their byte order, which might be little endian (typically on Intel computers) or big endian (typically on some Unix workstations). wxWidgets defines types and macros that make it easy to write architecture independent code. The types are:<p>
wxInt32, wxInt16, wxInt8, wxUint32, wxUint16 = wxWord, wxUint8 = wxByte<p>
where wxInt32 stands for a 32-bit signed integer type etc. You can also check which architecture the program is compiled on using the wxBYTE_ORDER define which is either wxBIG_ENDIAN or wxLITTLE_ENDIAN (in the future maybe wxPDP_ENDIAN as well).<p>
The macros handling bit-swapping with respect to the applications endianness are described in the <a class="el" href="group__group__funcmacro__byteorder.html">Byte Order</a> section.<h2><a class="anchor" name="page_multiplatform_conditionalcompilation">
Conditional Compilation</a></h2>
One of the purposes of wxWidgets is to reduce the need for conditional compilation in source code, which can be messy and confusing to follow. However, sometimes it is necessary to incorporate platform-specific features (such as metafile use under MS Windows). The <a class="el" href="page_wxusedef.html">wxUSE preprocessor symbols defined by wxWidgets</a> symbols listed in the file <code>setup.h</code> may be used for this purpose, along with any user-supplied ones.<h2><a class="anchor" name="page_multiplatform_cpp">
C++ Issues</a></h2>
The following documents some miscellaneous C++ issues.<h3><a class="anchor" name="page_multiplatform_cpp_templates">
Templates</a></h3>
wxWidgets does not use templates (except for some advanced features that are switched off by default) since it is a notoriously unportable feature.<h3><a class="anchor" name="page_multiplatform_cpp_rtti">
Runtime Type Information (RTTI)</a></h3>
wxWidgets does not use C++ run-time type information since wxWidgets provides its own run-time type information system, implemented using macros.<h3><a class="anchor" name="page_multiplatform_cpp_null">
Type of NULL</a></h3>
Some compilers (e.g. the native IRIX cc) define <span class="literal">NULL</span> to be 0L so that no conversion to pointers is allowed. Because of that, all these occurrences of <span class="literal">NULL</span> in the GTK+ port use an explicit conversion such as<p>
<div class="fragment"><pre class="fragment"><a class="code" href="classwx_window.html">wxWindow</a> *my_window = (<a class="code" href="classwx_window.html">wxWindow</a>*) NULL;
</pre></div><p>
It is recommended to adhere to this in all code using wxWidgets as this make the code (a bit) more portable.<h3><a class="anchor" name="page_multiplatform_cpp_precompiledheaders">
Precompiled Headers</a></h3>
Some compilers, such as Borland C++ and Microsoft C++, support precompiled headers. This can save a great deal of compiling time. The recommended approach is to precompile <code>"wx.h"</code>, using this precompiled header for compiling both wxWidgets itself and any wxWidgets applications. For Windows compilers, two dummy source files are provided (one for normal applications and one for creating DLLs) to allow initial creation of the precompiled header.<p>
However, there are several downsides to using precompiled headers. One is that to take advantage of the facility, you often need to include more header files than would normally be the case. This means that changing a header file will cause more recompilations (in the case of wxWidgets, everything needs to be recompiled since everything includes <code>"wx.h"</code>).<p>
A related problem is that for compilers that don't have precompiled headers, including a lot of header files slows down compilation considerably. For this reason, you will find (in the common X and Windows parts of the library) conditional compilation that under Unix, includes a minimal set of headers; and when using Visual C++, includes <code>"wx.h"</code>. This should help provide the optimal compilation for each compiler, although it is biased towards the precompiled headers facility available in Microsoft C++.<h2><a class="anchor" name="page_multiplatform_filehandling">
File Handling</a></h2>
When building an application which may be used under different environments, one difficulty is coping with documents which may be moved to different directories on other machines. Saving a file which has pointers to full pathnames is going to be inherently unportable.<p>
One approach is to store filenames on their own, with no directory information. The application then searches into a list of standard paths (platform-specific) through the use of <a class="el" href="classwx_standard_paths.html">wxStandardPaths</a>.<p>
Eventually you may want to use also the <a class="el" href="classwx_path_list.html">wxPathList</a> class.<p>
Nowadays the limitations of DOS 8+3 filenames doesn't apply anymore. Most modern operating systems allow at least 255 characters in the filename; the exact maximum length, as well as the characters allowed in the filenames, are OS-specific so you should try to avoid extremely long (&gt; 255 chars) filenames and/or filenames with non-ANSI characters.<p>
Another thing you need to keep in mind is that all Windows operating systems are case-insensitive, while Unix operating systems (Linux, Mac, etc) are case-sensitive.<p>
Also, for text files, different OSes use different End Of Lines (EOL). Windows uses CR+LF convention, Linux uses LF only, Mac CR only.<p>
The <a class="el" href="classwx_text_file.html">wxTextFile</a>, <a class="el" href="classwx_text_input_stream.html">wxTextInputStream</a>, <a class="el" href="classwx_text_output_stream.html">wxTextOutputStream</a> classes help to abstract from these differences. Of course, there are also 3rd party utilities such as <code>dos2unix</code> and <code>unix2dos</code> which do the EOL conversions.<p>
See also the <a class="el" href="group__group__funcmacro__file.html">Files and Directories</a> section of the reference manual for the description of miscellaneous file handling functions.<h2><a class="anchor" name="page_multiplatform_reducingerr">
Reducing Programming Errors</a></h2>
<h3><a class="anchor" name="page_multiplatform_reducingerr_useassert">
Use ASSERT</a></h3>
It is good practice to use ASSERT statements liberally, that check for conditions that should or should not hold, and print out appropriate error messages.<p>
These can be compiled out of a non-debugging version of wxWidgets and your application. Using ASSERT is an example of `defensive programming': it can alert you to problems later on.<p>
See <a class="el" href="group__group__funcmacro__debug.html#g204cc264ee560b67e6c6467ba8ffee5f">wxASSERT()</a> for more info.<h3><a class="anchor" name="page_multiplatform_reducingerr_usewxstring">
Use wxString in Preference to Character Arrays</a></h3>
Using <a class="el" href="classwx_string.html">wxString</a> can be much safer and more convenient than using <code>wxChar*</code>.<p>
You can reduce the possibility of memory leaks substantially, and it is much more convenient to use the overloaded operators than functions such as <code>strcmp</code>. <a class="el" href="classwx_string.html">wxString</a> won't add a significant overhead to your program; the overhead is compensated for by easier manipulation (which means less code).<p>
The same goes for other data types: use classes wherever possible.<h2><a class="anchor" name="page_multiplatform_gui">
GUI Design</a></h2>
<ul>
<li><b>Use Sizers:</b> Don't use absolute panel item positioning if you can avoid it. Every platform's native controls have very different sizes. Consider using the <a class="el" href="overview_sizer.html">Sizers Overview</a> instead. </li>
<li><b>Use wxWidgets Resource Files:</b> Use <code>XRC</code> (wxWidgets resource files) where possible, because they can be easily changed independently of source code. See the <a class="el" href="overview_xrc.html">XML Based Resource System (XRC)</a> for more info.</li>
</ul>
<h2><a class="anchor" name="page_multiplatform_debug">
Debugging</a></h2>
<h3><a class="anchor" name="page_multiplatform_debug_positivethinking">
Positive Thinking</a></h3>
It is common to blow up the problem in one's imagination, so that it seems to threaten weeks, months or even years of work. The problem you face may seem insurmountable: but almost never is. Once you have been programming for some time, you will be able to remember similar incidents that threw you into the depths of despair. But remember, you always solved the problem, somehow!<p>
Perseverance is often the key, even though a seemingly trivial problem can take an apparently inordinate amount of time to solve. In the end, you will probably wonder why you worried so much. That's not to say it isn't painful at the time. Try not to worry -- there are many more important things in life.<h3><a class="anchor" name="page_multiplatform_debug_simplifyproblem">
Simplify the Problem</a></h3>
Reduce the code exhibiting the problem to the smallest program possible that exhibits the problem. If it is not possible to reduce a large and complex program to a very small program, then try to ensure your code doesn't hide the problem (you may have attempted to minimize the problem in some way: but now you want to expose it).<p>
With luck, you can add a small amount of code that causes the program to go from functioning to non-functioning state. This should give a clue to the problem. In some cases though, such as memory leaks or wrong deallocation, this can still give totally spurious results!<h3><a class="anchor" name="page_multiplatform_debug_usedebugger">
Use a Debugger</a></h3>
This sounds like facetious advice, but it is surprising how often people don't use a debugger. Often it is an overhead to install or learn how to use a debugger, but it really is essential for anything but the most trivial programs.<h3><a class="anchor" name="page_multiplatform_debug_uselogging">
Use Logging Functions</a></h3>
There is a variety of logging functions that you can use in your program: see <a class="el" href="group__group__funcmacro__log.html">Logging</a>.<p>
Using tracing statements may be more convenient than using the debugger in some circumstances (such as when your debugger doesn't support a lot of debugging code, or you wish to print a bunch of variables).<h3><a class="anchor" name="page_multiplatform_debug_usedebuggingfacilities">
Use the wxWidgets Debugging Facilities</a></h3>
You can use <a class="el" href="classwx_debug_context.html">wxDebugContext</a> to check for memory leaks and corrupt memory: in fact in debugging mode, wxWidgets will automatically check for memory leaks at the end of the program if wxWidgets is suitably configured. Depending on the operating system and compiler, more or less specific information about the problem will be logged.<p>
You should also use group_funcmacro_debugging as part of a "defensive programming" strategy, scattering <a class="el" href="group__group__funcmacro__debug.html#g204cc264ee560b67e6c6467ba8ffee5f">wxASSERT()</a>s liberally to test for problems in your code as early as possible. Forward thinking will save a surprising amount of time in the long run.<p>
See the <a class="el" href="overview_debugging.html">Debugging</a> for further information. </div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org/" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Sat Sep 6 08:15:36 2008</tt> by <a href="http://www.doxygen.org/">Doxygen</a> 1.5.6</p></td>
    <td valign="middle" align="right"><p>[ <a href="wsdindex.html#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-794025-2");
    pageTracker._initData();
    pageTracker._trackPageview();
</script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
