<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: wxMutex Class Reference</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Sat Sep 6 08:15:55 2008"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>wxMutex Class Reference<br>
<small>
[<a class="el" href="group__group__class__threading.html">Threading</a>]</small>
</h1><!-- doxytag: class="wxMutex" --><code>#include &lt;wx/thread.h&gt;</code>
<p>

<p>
<a href="classwx_mutex-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
A mutex object is a synchronization object whose state is set to signaled when it is not owned by any thread, and nonsignaled when it is owned. Its name comes from its usefulness in coordinating mutually-exclusive access to a shared resource as only one thread at a time can own a mutex object.<p>
Mutexes may be recursive in the sense that a thread can lock a mutex which it had already locked before (instead of dead locking the entire process in this situation by starting to wait on a mutex which will never be released while the thread is waiting) but using them is not recommended under Unix and they are <b>not</b> recursive by default. The reason for this is that recursive mutexes are not supported by all Unix flavours and, worse, they cannot be used with <a class="el" href="classwx_condition.html">wxCondition</a>.<p>
For example, when several threads use the data stored in the linked list, modifications to the list should only be allowed to one thread at a time because during a new node addition the list integrity is temporarily broken (this is also called <em>program</em> invariant).<p>
<div class="fragment"><pre class="fragment">    <span class="comment">// this variable has an "s_" prefix because it is static: seeing an "s_" in</span>
    <span class="comment">// a multithreaded program is in general a good sign that you should use a</span>
    <span class="comment">// mutex (or a critical section)</span>
    <span class="keyword">static</span> <a class="code" href="classwx_mutex.html">wxMutex</a> *s_mutexProtectingTheGlobalData;

    <span class="comment">// we store some numbers in this global array which is presumably used by</span>
    <span class="comment">// several threads simultaneously</span>
    wxArrayInt s_data;

    <span class="keywordtype">void</span> MyThread::AddNewNode(<span class="keywordtype">int</span> num)
    {
        <span class="comment">// ensure that no other thread accesses the list</span>
        s_mutexProtectingTheGlobalList-&gt;Lock();

        s_data.Add(num);

        s_mutexProtectingTheGlobalList-&gt;Unlock();
    }

    <span class="comment">// return true if the given number is greater than all array elements</span>
    <span class="keywordtype">bool</span> MyThread::IsGreater(<span class="keywordtype">int</span> num)
    {
        <span class="comment">// before using the list we must acquire the mutex</span>
        <a class="code" href="classwx_mutex_locker.html">wxMutexLocker</a> lock(s_mutexProtectingTheGlobalData);

        <span class="keywordtype">size_t</span> count = s_data.Count();
        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> n = 0; n &lt; count; n++ )
        {
            <span class="keywordflow">if</span> ( s_data[n] &gt; num )
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
</pre></div><p>
Notice how <a class="el" href="classwx_mutex_locker.html">wxMutexLocker</a> was used in the second function to ensure that the mutex is unlocked in any case: whether the function returns true or false (because the destructor of the local object lock is always called). Using this class instead of directly using <a class="el" href="classwx_mutex.html">wxMutex</a> is, in general safer and is even more so if your program uses C++ exceptions.<p>
<div><span class="lib">Library:</span>&nbsp;&nbsp;<span class="lib_text"><a class="el" href="page_libs.html#page_libs_wxbase">wxBase</a></span></div><p>
<div><span class="category">Category:</span>&nbsp;&nbsp;<span class="category_text"><a class="el" href="group__group__class__threading.html">Threading</a></span></div><p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classwx_thread.html">wxThread</a>, <a class="el" href="classwx_condition.html">wxCondition</a>, <a class="el" href="classwx_mutex_locker.html">wxMutexLocker</a>, <a class="el" href="classwx_critical_section.html">wxCriticalSection</a> </dd></dl>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_mutex.html#f5854c82759e233a3ecfcd683d857288">wxMutex</a> (<a class="el" href="interface_2wx_2thread_8h.html#20ab09ca102b0bef60c0f8eb9aad3ff3">wxMutexType</a> type=wxMUTEX_DEFAULT)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_mutex.html#ca15d3e1f04cf77b25b8a25a37c7281d">~wxMutex</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="interface_2wx_2thread_8h.html#c8c1ee75d2a2da3be8eabc629f71c1a7">wxMutexError</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_mutex.html#5291e0e421262f420051390421ba0d09">Lock</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="interface_2wx_2thread_8h.html#c8c1ee75d2a2da3be8eabc629f71c1a7">wxMutexError</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_mutex.html#1e22609b14aefe8a248b2e48bca51415">LockTimeout</a> (unsigned long msec)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="interface_2wx_2thread_8h.html#c8c1ee75d2a2da3be8eabc629f71c1a7">wxMutexError</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_mutex.html#4485a8234390d1adc69426337069602b">TryLock</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="interface_2wx_2thread_8h.html#c8c1ee75d2a2da3be8eabc629f71c1a7">wxMutexError</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_mutex.html#ad45c7189e66d6d49eeaf1135ab24af7">Unlock</a> ()</td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="f5854c82759e233a3ecfcd683d857288"></a><!-- doxytag: member="wxMutex::wxMutex" ref="f5854c82759e233a3ecfcd683d857288" args="(wxMutexType type=wxMUTEX_DEFAULT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxMutex::wxMutex           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_2wx_2thread_8h.html#20ab09ca102b0bef60c0f8eb9aad3ff3">wxMutexType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em> = <code>wxMUTEX_DEFAULT</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default constructor. 
</div>
</div><p>
<a class="anchor" name="ca15d3e1f04cf77b25b8a25a37c7281d"></a><!-- doxytag: member="wxMutex::~wxMutex" ref="ca15d3e1f04cf77b25b8a25a37c7281d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxMutex::~wxMutex           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroys the <a class="el" href="classwx_mutex.html">wxMutex</a> object. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="5291e0e421262f420051390421ba0d09"></a><!-- doxytag: member="wxMutex::Lock" ref="5291e0e421262f420051390421ba0d09" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_2wx_2thread_8h.html#c8c1ee75d2a2da3be8eabc629f71c1a7">wxMutexError</a> wxMutex::Lock           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Locks the mutex object. This is equivalent to <a class="el" href="classwx_mutex.html#1e22609b14aefe8a248b2e48bca51415">LockTimeout()</a> with infinite timeout.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>One of: <code>wxMUTEX_NO_ERROR</code>, <code>wxMUTEX_DEAD_LOCK</code>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1e22609b14aefe8a248b2e48bca51415"></a><!-- doxytag: member="wxMutex::LockTimeout" ref="1e22609b14aefe8a248b2e48bca51415" args="(unsigned long msec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_2wx_2thread_8h.html#c8c1ee75d2a2da3be8eabc629f71c1a7">wxMutexError</a> wxMutex::LockTimeout           </td>
          <td>(</td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>msec</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Try to lock the mutex object during the specified time interval.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>One of: <code>wxMUTEX_NO_ERROR</code>, <code>wxMUTEX_DEAD_LOCK</code>, <code>wxMUTEX_TIMEOUT</code>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="4485a8234390d1adc69426337069602b"></a><!-- doxytag: member="wxMutex::TryLock" ref="4485a8234390d1adc69426337069602b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_2wx_2thread_8h.html#c8c1ee75d2a2da3be8eabc629f71c1a7">wxMutexError</a> wxMutex::TryLock           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tries to lock the mutex object. If it can't, returns immediately with an error.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>One of: <code>wxMUTEX_NO_ERROR</code>, <code>wxMUTEX_BUSY</code>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ad45c7189e66d6d49eeaf1135ab24af7"></a><!-- doxytag: member="wxMutex::Unlock" ref="ad45c7189e66d6d49eeaf1135ab24af7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_2wx_2thread_8h.html#c8c1ee75d2a2da3be8eabc629f71c1a7">wxMutexError</a> wxMutex::Unlock           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unlocks the mutex object.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>One of: <code>wxMUTEX_NO_ERROR</code>, <code>wxMUTEX_UNLOCKED</code>. </dd></dl>

</div>
</div><p>
</div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org/" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Sat Sep 6 08:15:55 2008</tt> by <a href="http://www.doxygen.org/">Doxygen</a> 1.5.6</p></td>
    <td valign="middle" align="right"><p>[ <a href="wsdindex.html#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-794025-2");
    pageTracker._initData();
    pageTracker._trackPageview();
</script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
