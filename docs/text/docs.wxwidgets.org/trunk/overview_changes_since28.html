<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: Changes Since wxWidgets 2.8</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Sat Sep 6 10:17:56 2008"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">wxWidgets 2.9.0: A portable C++ GUI toolkit</a>&nbsp;&raquo&nbsp;<a class="el" href="page_topics.html">Topic Overviews</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="overview_changes_since28">Changes Since wxWidgets 2.8 </a></h1>This topic describes backwards-incompatible changes in wxWidgets 3.0 compared to the last stable release.<p>
The incompatible changes can be grouped into the following categories:<p>
<ul>
<li><a class="el" href="overview_changes_since28.html#overview_changes_unicode">Unicode-related Changes</a> </li>
<li><a class="el" href="overview_changes_since28.html#overview_changes_other">Miscellaneous Other Changes</a></li>
</ul>
<hr>
<h2><a class="anchor" name="overview_changes_unicode">
Unicode-related Changes</a></h2>
If you used Unicode build of wxWidgets 2.8 or previous version, please read <a class="el" href="overview_unicode.html">Unicode Support in wxWidgets</a> for the details about how the API changed in 3.0 as a lot of the information which was correct before doesn't apply any longer.<p>
For example, the notorious (due to the confusion they created) macros <code><a class="el" href="group__group__funcmacro__string.html#g437ea6ba615b75dac8603e96ec864160">wxT()</a></code> and <code><a class="el" href="group__group__funcmacro__string.html#g7dfc2888539861afe6c4337ef315472b">_T()</a></code> are not needed at all any longer. Basically, you can remove them from any code which used them. On the other hand, there is no particular harm in leaving them neither as the code will still compile and work correctly -- you only need to remove them if you think that your code looks tidier without them. You also don't need to use <code>wxChar</code> any longer but can directly use the standard <code>wchar_t</code> type even if, again, <code>wxChar</code> continues to work.<p>
The most serious backwards-incompatible change is related to the change of return type of <a class="el" href="classwx_string.html#7b03261d7b716ef7d11c8c304971c457">wxString::c_str()</a> method: it returns a special proxy object instead of a simple <code>char*</code> or <code>wchar_t*</code> now. Because of this, you cannot pass its result to any standard vararg functions such as <code>printf()</code> any more as described in <a class="el" href="overview_unicode.html#overview_unicode_compilation_errors">Unicode-Related Compilation Errors</a>. All wxWidgets functions, such as wxPrintf(), <a class="el" href="group__group__funcmacro__log.html#g249358701f3c2d410088ddf7a61d8564">wxLogMessage()</a> &amp;c still work with it, but passing it to <code>printf()</code> will now result in a crash. It is strongly advised to recompile your code with a compiler warning about passing non-POD objects to vararg functions, such as g++.<p>
The change of the type of <a class="el" href="classwx_string.html#7b03261d7b716ef7d11c8c304971c457">wxString::c_str()</a> can also result in compilation errors when passing its result to a function overloaded to take both narrow and wide strings and in this case you must select the version which you really want to use, e.g.: <div class="fragment"><pre class="fragment">    <span class="keywordtype">void</span> OpenLogFile(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename);
    <span class="keywordtype">void</span> OpenLogFile(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span> *filename);

    <a class="code" href="classwx_string.html">wxString</a> s;
    OpenLogFile(s);             <span class="comment">// ERROR: ambiguity</span>
    OpenLogFile(s.<a class="code" href="classwx_string.html#7b03261d7b716ef7d11c8c304971c457">c_str</a>());     <span class="comment">// ERROR: ambiguity</span>
    OpenLogFile(s.<a class="code" href="classwx_string.html#667b135c20008042653f82b739f6c3ab">wx_str</a>());    <span class="comment">// OK: function called depends on the build</span>
    OpenLogFile(s.<a class="code" href="classwx_string.html#dcfd12e6d0765b1d74bccc3d63d02e98">mb_str</a>());    <span class="comment">// OK: always calls narrow string overload</span>
    OpenLogFile(s.<a class="code" href="classwx_string.html#6cd4782263a3ed4064eca915eb6e27e6">wc_str</a>());    <span class="comment">// OK: always calls wide string overload</span>
</pre></div><p>
The other class of incompatible changes is due to modifying some virtual methods to use <code><a class="el" href="classwx_string.html">wxString</a></code> parameters instead of <code>const</code> <code>wxChar*</code> ones to make them accept both narrow and wide strings. This is not a problem if you simply call these functions but you need to change the signature of the derived class versions if you override them as otherwise they wouldn't be called any more. Again, the best way to ensure that this problem doesn't arise is to rebuild your code using a compiler which warns about function signature mismatch (you can use <code>-Woverloaded-virtual</code> g++ option).<p>
Finally, a few structure fields, notable <code><a class="el" href="structwx_cmd_line_entry_desc.html#1fa5b1fb90ff3051a011a6ce10261796">wxCmdLineEntryDesc::shortName</a></code>, <code>longName</code> and <code>description</code> fields have been changed to be of type <code>const</code> <code>char*</code> instead of <code>const</code> <code>wxChar*</code> so you will need to remove <code><a class="el" href="group__group__funcmacro__string.html#g437ea6ba615b75dac8603e96ec864160">wxT()</a></code> or <code><a class="el" href="group__group__funcmacro__string.html#g7dfc2888539861afe6c4337ef315472b">_T()</a></code> if you used it with their initializers.<h2><a class="anchor" name="overview_changes_other">
Miscellaneous Other Changes</a></h2>
<ul>
<li>Default location of <a class="el" href="classwx_file_config.html">wxFileConfig</a> files has changed under Windows, you will need to update your code if you access these files directly.</li></ul>
<p>
<ul>
<li><a class="el" href="classwx_window.html#bbb4120ec24268ccc673ac455f89d99d">wxWindow::IsEnabled()</a> now returns false if a window parent (and not necessarily the window itself) is disabled, new function IsThisEnabled() with the same behaviour as old IsEnabled() was added.</li></ul>
<p>
<ul>
<li>Generating <a class="el" href="classwx_navigation_key_event.html">wxNavigationKeyEvent</a> events doesn't work any more under wxGTK (and other platforms in the future), use <a class="el" href="classwx_window.html#86904f6785df4af6036b33383490a805">wxWindow::Navigate()</a> or NavigateIn() instead.</li></ul>
<p>
<ul>
<li>Sizers distribute only the extra space between the stretchable items according to their proportions and not all available space. We believe the new behaviour corresponds better to user expectations but if you did rely on the old behaviour you will have to update your code to set the minimal sizes of the sizer items to be in the same proportion as the items proportions to return to the old behaviour.</li></ul>
<p>
<ul>
<li><a class="el" href="classwx_window.html#c2883b9e3167a339507b1f172ca3a4bb">wxWindow::Freeze</a>/Thaw() are not virtual any more, if you overrode them in your code you need to override DoFreeze/Thaw() instead now.</li></ul>
<p>
<ul>
<li><a class="el" href="classwx_calendar_ctrl.html">wxCalendarCtrl</a> has native implementation in wxGTK, but it has less features than the generic one. The native implementation is used by default, but you can still use wxGenericCalendarCtrl instead of <a class="el" href="classwx_calendar_ctrl.html">wxCalendarCtrl</a> in your code if you need the extra features.</li></ul>
<p>
<ul>
<li>wxDocument::FileHistoryLoad() and <a class="el" href="classwx_file_history.html#952e3ed90a770b0f8ee3d50af9d8d7c7">wxFileHistory::Load()</a> now take const reference to <a class="el" href="classwx_config_base.html">wxConfigBase</a> argument and not just a reference, please update your code if you overrode these functions and change the functions in the derived classes to use const reference as well.</li></ul>
<p>
<ul>
<li>Calling wxConfig::Write() with an enum value will fail to compile because wxConfig now tries to convert all unknown types to <a class="el" href="classwx_string.html">wxString</a> automatically using <a class="el" href="group__group__funcmacro__misc.html#g0adf8026ea8ed126420a2e7ef9edc678">wxToString()</a> function.</li></ul>
<p>
The simplest solution is to cast the enum value to int, e.g. <div class="fragment"><pre class="fragment">    <span class="keyword">enum</span> Colour { Red, Green, Blue };

    wxConfig conf;
    conf.Write(<span class="stringliteral">"MyFavouriteColour"</span>, Red);       <span class="comment">// ERROR: no match</span>
    conf.Write(<span class="stringliteral">"MyFavouriteColour"</span>, <span class="keywordtype">int</span>(Red));  <span class="comment">// OK</span>
</pre></div><p>
Another possibility which exists now is to provide an overload of <a class="el" href="group__group__funcmacro__misc.html#g0adf8026ea8ed126420a2e7ef9edc678">wxToString()</a> (and <a class="el" href="group__group__funcmacro__misc.html#g598ae7504c6436af325490b41f4b5e90">wxFromString()</a>) for your own type, e.g.<p>
<div class="fragment"><pre class="fragment">    <a class="code" href="classwx_string.html">wxString</a> <a class="code" href="group__group__funcmacro__misc.html#g0adf8026ea8ed126420a2e7ef9edc678">wxToString</a>(Colour col)
    {
        <span class="keywordflow">return</span> col == Red ? <span class="stringliteral">"R"</span> : col == Green ? <span class="stringliteral">"G"</span> : <span class="stringliteral">"B"</span>;
    }

    <span class="keywordtype">bool</span> <a class="code" href="group__group__funcmacro__misc.html#g598ae7504c6436af325490b41f4b5e90">wxFromString</a>(<span class="keyword">const</span> <a class="code" href="classwx_string.html">wxString</a>&amp; s, Colour* col)
    {
        <span class="keywordflow">if</span> ( s.<a class="code" href="classwx_string.html#f63f200410b56436a830550905e20539">length</a>() != 1 )
            <span class="keywordflow">return</span> <span class="keyword">false</span>;

        <span class="keywordflow">switch</span> ( s[0].GetValue() )
        {
            <span class="keywordflow">case</span> <span class="charliteral">'R'</span>: *col = Red; <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="charliteral">'G'</span>: *col = Green; <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="charliteral">'B'</span>: *col = Blue; <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
</pre></div><p>
Of course, this will change the format of the wxConfig output which may be undesirable.<p>
<ul>
<li>wxTE_AUTO_SCROLL style is deprecated as it's always on by default anyhow in the ports which support it so you should simply remove any mentions of it from your code. </li></ul>
</div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org/" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Sat Sep 6 10:17:56 2008</tt> by <a href="http://www.doxygen.org/">Doxygen</a> 1.5.6</p></td>
    <td valign="middle" align="right"><p>[ <a href="wsdindex.html#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-794025-2");
    pageTracker._initData();
    pageTracker._trackPageview();
</script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
