<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: wxTempFile Class Reference</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Sat Sep 6 08:16:00 2008"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>wxTempFile Class Reference<br>
<small>
[<a class="el" href="group__group__class__file.html">File Handling</a>]</small>
</h1><!-- doxytag: class="wxTempFile" --><code>#include &lt;wx/file.h&gt;</code>
<p>

<p>
<a href="classwx_temp_file-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classwx_temp_file.html">wxTempFile</a> provides a relatively safe way to replace the contents of the existing file. The name is explained by the fact that it may be also used as just a temporary file if you don't replace the old file contents.<p>
Usually, when a program replaces the contents of some file it first opens it for writing, thus losing all of the old data and then starts recreating it. This approach is not very safe because during the regeneration of the file bad things may happen: the program may find that there is an internal error preventing it from completing file generation, the user may interrupt it (especially if file generation takes long time) and, finally, any other external interrupts (power supply failure or a disk error) will leave you without either the original file or the new one.<p>
<a class="el" href="classwx_temp_file.html">wxTempFile</a> addresses this problem by creating a temporary file which is meant to replace the original file - but only after it is fully written. So, if the user interrupts the program during the file generation, the old file won't be lost. Also, if the program discovers itself that it doesn't want to replace the old file there is no problem - in fact, <a class="el" href="classwx_temp_file.html">wxTempFile</a> will <b>not</b> replace the old file by default, you should explicitly call <a class="el" href="classwx_temp_file.html#3483386ef70cd83a2919054a681f2892">wxTempFile::Commit</a> to do it. Calling <a class="el" href="classwx_temp_file.html#e4154e93bcd87a48293e38666e2e10a8">wxTempFile::Discard</a> explicitly discards any modifications: it closes and deletes the temporary file and leaves the original file unchanged. If you don't call neither of <a class="el" href="classwx_temp_file.html#3483386ef70cd83a2919054a681f2892">Commit()</a> and <a class="el" href="classwx_temp_file.html#e4154e93bcd87a48293e38666e2e10a8">Discard()</a>, the destructor will call <a class="el" href="classwx_temp_file.html#e4154e93bcd87a48293e38666e2e10a8">Discard()</a> automatically.<p>
To summarize: if you want to replace another file, create an instance of <a class="el" href="classwx_temp_file.html">wxTempFile</a> passing the name of the file to be replaced to the constructor (you may also use default constructor and pass the file name to <a class="el" href="classwx_temp_file.html#9c6a42adfae433ce7928fb77ac769291">wxTempFile::Open</a>). Then you can wxTempFile::write to <a class="el" href="classwx_temp_file.html">wxTempFile</a> using wxFile-like functions and later call <a class="el" href="classwx_temp_file.html#3483386ef70cd83a2919054a681f2892">Commit()</a> to replace the old file (and close this one) or call <a class="el" href="classwx_temp_file.html#e4154e93bcd87a48293e38666e2e10a8">Discard()</a> to cancel the modifications.<p>
<div><span class="lib">Library:</span>&nbsp;&nbsp;<span class="lib_text"><a class="el" href="page_libs.html#page_libs_wxbase">wxBase</a></span></div><p>
<div><span class="category">Category:</span>&nbsp;&nbsp;<span class="category_text"><a class="el" href="group__group__class__file.html">File Handling</a></span></div> <table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#3eb3d2c6bab845067b40f29159198a82">wxTempFile</a> (const <a class="el" href="classwx_string.html">wxString</a> &amp;strName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#64b32458252f16d9e2de51e3528ac5ea">~wxTempFile</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#3483386ef70cd83a2919054a681f2892">Commit</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#e4154e93bcd87a48293e38666e2e10a8">Discard</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#a1ae23eeff613f655c746d2a9836a79c">IsOpened</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">wxFileOffset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#9914d26a3ae35ca69c438cfb07d9a9a9">Length</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#9c6a42adfae433ce7928fb77ac769291">Open</a> (const <a class="el" href="classwx_string.html">wxString</a> &amp;strName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">wxFileOffset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#b3d5fd185404cab6431500cd0019988f">Seek</a> (wxFileOffset ofs, <a class="el" href="ffile_8h.html#e3981f8632f0391e5c852bf62eb982b0">wxSeekMode</a> mode=wxFromStart)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">wxFileOffset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#7b930c371b6546950903949f6000dc13">Tell</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_temp_file.html#40b4547f8c20673ea38e84b8a6a7eb02">Write</a> (const <a class="el" href="classwx_string.html">wxString</a> &amp;str, const <a class="el" href="classwx_m_b_conv.html">wxMBConv</a> &amp;conv=wxConvUTF8)</td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="3eb3d2c6bab845067b40f29159198a82"></a><!-- doxytag: member="wxTempFile::wxTempFile" ref="3eb3d2c6bab845067b40f29159198a82" args="(const wxString &amp;strName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxTempFile::wxTempFile           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwx_string.html">wxString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>strName</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Associates <a class="el" href="classwx_temp_file.html">wxTempFile</a> with the file to be replaced and opens it. You should use <a class="el" href="classwx_temp_file.html#a1ae23eeff613f655c746d2a9836a79c">IsOpened()</a> to verify if the constructor succeeded. 
</div>
</div><p>
<a class="anchor" name="64b32458252f16d9e2de51e3528ac5ea"></a><!-- doxytag: member="wxTempFile::~wxTempFile" ref="64b32458252f16d9e2de51e3528ac5ea" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxTempFile::~wxTempFile           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor calls <a class="el" href="classwx_temp_file.html#e4154e93bcd87a48293e38666e2e10a8">Discard()</a> if temporary file is still opened. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="3483386ef70cd83a2919054a681f2892"></a><!-- doxytag: member="wxTempFile::Commit" ref="3483386ef70cd83a2919054a681f2892" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wxTempFile::Commit           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Validate changes: deletes the old file of name m_strName and renames the new file to the old name. Returns <span class="literal">true</span> if both actions succeeded. If <span class="literal">false</span> is returned it may unfortunately mean two quite different things: either that either the old file couldn't be deleted or that the new file couldn't be renamed to the old name. 
</div>
</div><p>
<a class="anchor" name="e4154e93bcd87a48293e38666e2e10a8"></a><!-- doxytag: member="wxTempFile::Discard" ref="e4154e93bcd87a48293e38666e2e10a8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wxTempFile::Discard           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Discard changes: the old file contents is not changed, temporary file is deleted. 
</div>
</div><p>
<a class="anchor" name="a1ae23eeff613f655c746d2a9836a79c"></a><!-- doxytag: member="wxTempFile::IsOpened" ref="a1ae23eeff613f655c746d2a9836a79c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wxTempFile::IsOpened           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns <span class="literal">true</span> if the file was successfully opened. 
</div>
</div><p>
<a class="anchor" name="9914d26a3ae35ca69c438cfb07d9a9a9"></a><!-- doxytag: member="wxTempFile::Length" ref="9914d26a3ae35ca69c438cfb07d9a9a9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxFileOffset wxTempFile::Length           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the length of the file. 
</div>
</div><p>
<a class="anchor" name="9c6a42adfae433ce7928fb77ac769291"></a><!-- doxytag: member="wxTempFile::Open" ref="9c6a42adfae433ce7928fb77ac769291" args="(const wxString &amp;strName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wxTempFile::Open           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwx_string.html">wxString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>strName</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open the temporary file, returns <span class="literal">true</span> on success, <span class="literal">false</span> if an error occurred. <em>strName</em> is the name of file to be replaced. The temporary file is always created in the directory where <em>strName</em> is. In particular, if <em>strName</em> doesn't include the path, it is created in the current directory and the program should have write access to it for the function to succeed. 
</div>
</div><p>
<a class="anchor" name="b3d5fd185404cab6431500cd0019988f"></a><!-- doxytag: member="wxTempFile::Seek" ref="b3d5fd185404cab6431500cd0019988f" args="(wxFileOffset ofs, wxSeekMode mode=wxFromStart)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxFileOffset wxTempFile::Seek           </td>
          <td>(</td>
          <td class="paramtype">wxFileOffset&nbsp;</td>
          <td class="paramname"> <em>ofs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffile_8h.html#e3981f8632f0391e5c852bf62eb982b0">wxSeekMode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em> = <code>wxFromStart</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Seeks to the specified position. 
</div>
</div><p>
<a class="anchor" name="7b930c371b6546950903949f6000dc13"></a><!-- doxytag: member="wxTempFile::Tell" ref="7b930c371b6546950903949f6000dc13" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxFileOffset wxTempFile::Tell           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the current position or wxInvalidOffset if file is not opened or if another error occurred. 
</div>
</div><p>
<a class="anchor" name="40b4547f8c20673ea38e84b8a6a7eb02"></a><!-- doxytag: member="wxTempFile::Write" ref="40b4547f8c20673ea38e84b8a6a7eb02" args="(const wxString &amp;str, const wxMBConv &amp;conv=wxConvUTF8)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wxTempFile::Write           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwx_string.html">wxString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwx_m_b_conv.html">wxMBConv</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>conv</em> = <code>wxConvUTF8</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write to the file, return <span class="literal">true</span> on success, <span class="literal">false</span> on failure. The second argument is only meaningful in Unicode build of wxWidgets when <em>conv</em> is used to convert <em>str</em> to multibyte representation. 
</div>
</div><p>
</div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org/" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Sat Sep 6 08:16:00 2008</tt> by <a href="http://www.doxygen.org/">Doxygen</a> 1.5.6</p></td>
    <td valign="middle" align="right"><p>[ <a href="wsdindex.html#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-794025-2");
    pageTracker._initData();
    pageTracker._trackPageview();
</script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
