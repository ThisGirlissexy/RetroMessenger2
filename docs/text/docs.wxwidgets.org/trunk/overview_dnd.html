<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: Drag and Drop Overview</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Sat Sep 6 10:17:56 2008"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">wxWidgets 2.9.0: A portable C++ GUI toolkit</a>&nbsp;&raquo&nbsp;<a class="el" href="page_topics.html">Topic Overviews</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="overview_dnd">Drag and Drop Overview </a></h1>Classes: <a class="el" href="classwx_data_object.html">wxDataObject</a>, <a class="el" href="classwx_text_data_object.html">wxTextDataObject</a>, <a class="el" href="classwx_drop_source.html">wxDropSource</a>, <a class="el" href="classwx_drop_target.html">wxDropTarget</a>, <a class="el" href="classwx_text_drop_target.html">wxTextDropTarget</a>, <a class="el" href="classwx_file_drop_target.html">wxFileDropTarget</a><p>
Note that <code>wxUSE_DRAG_AND_DROP</code> must be defined in <code>setup.h</code> in order to use drag and drop in wxWidgets.<p>
See also: <a class="el" href="overview_dataobject.html">wxDataObject Overview</a> and <a class="el" href="page_samples.html#page_samples_dnd">Drag &amp; Drop Sample</a>.<p>
It may be noted that data transfer to and from the clipboard is quite similar to data transfer with drag and drop and the code to implement these two types is almost the same. In particular, both data transfer mechanisms store data in some kind of <a class="el" href="classwx_data_object.html">wxDataObject</a> and identify its format(s) using the <a class="el" href="classwx_data_format.html">wxDataFormat</a> class.<p>
To be a <em>drag</em> source, i.e. to provide the data which may be dragged by the user elsewhere, you should implement the following steps:<p>
<ul>
<li><b>Preparation:</b> First of all, a data object must be created and initialized with the data you wish to drag. For example:</li>
</ul>
<div class="fragment"><pre class="fragment">    <a class="code" href="classwx_text_data_object.html">wxTextDataObject</a> my_data(<span class="stringliteral">"This text will be dragged."</span>);
</pre></div><p>
<ul>
<li><b>Drag start</b>: To start the dragging process (typically in response to a mouse click) you must call <a class="el" href="classwx_drop_source.html#7053f3286614a78d0fd8c282c286778d">wxDropSource::DoDragDrop</a> like this:</li>
</ul>
<div class="fragment"><pre class="fragment">    <a class="code" href="classwx_drop_source.html">wxDropSource</a> dragSource( <span class="keyword">this</span> );
    dragSource.SetData( my_data );
    <a class="code" href="interface_2wx_2dnd_8h.html#dbd4b292582eebbc9a6ce3dee31c2afb">wxDragResult</a> result = dragSource.DoDragDrop( <span class="keyword">true</span> );
</pre></div><p>
<ul>
<li><b>Dragging:</b> The call to DoDragDrop() blocks the program until the user releases the mouse button (unless you override the <a class="el" href="classwx_drop_source.html#2b667de6f631839d4c4383f436726f7f">wxDropSource::GiveFeedback</a> function to do something special). When the mouse moves in a window of a program which understands the same drag-and-drop protocol (any program under Windows or any program supporting the XDnD protocol under X Windows), the corresponding <a class="el" href="classwx_drop_target.html">wxDropTarget</a> methods are called - see below.</li>
</ul>
<ul>
<li><b>Processing the result</b>: DoDragDrop() returns an <em>effect</em> code which is one of the values of <code>wxDragResult</code> enum (explained in <a class="el" href="classwx_drop_target.html">wxDropTarget</a> page):</li>
</ul>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">switch</span> (result)
    {
        <span class="keywordflow">case</span> <a class="code" href="interface_2wx_2dnd_8h.html#dbd4b292582eebbc9a6ce3dee31c2afb736c04c59caf8154a096e0d350492fc1" title="The data was successfully copied.">wxDragCopy</a>:
            <span class="comment">// copy the data</span>
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="interface_2wx_2dnd_8h.html#dbd4b292582eebbc9a6ce3dee31c2afb8b2ba916ca49cc93ef34a5e20684d18e" title="The data was successfully moved (MSW only).">wxDragMove</a>:
            <span class="comment">// move the data</span>
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
            <span class="comment">// do nothing</span>
            <span class="keywordflow">break</span>;
    }
</pre></div><p>
To be a <em>drop</em> target, i.e. to receive the data dropped by the user you should follow the instructions below:<p>
<ul>
<li><b>Initialization:</b> For a window to be a drop target, it needs to have an associated <a class="el" href="classwx_drop_target.html">wxDropTarget</a> object. Normally, you will call <a class="el" href="classwx_window.html#08ee13627296e184be114d7ea223adf8">wxWindow::SetDropTarget</a> during window creation associating your drop target with it. You must derive a class from <a class="el" href="classwx_drop_target.html">wxDropTarget</a> and override its pure virtual methods. Alternatively, you may derive from <a class="el" href="classwx_text_drop_target.html">wxTextDropTarget</a> or <a class="el" href="classwx_file_drop_target.html">wxFileDropTarget</a> and override their OnDropText() or OnDropFiles() method.</li>
</ul>
<ul>
<li><b>Drop:</b> When the user releases the mouse over a window, wxWidgets asks the associated <a class="el" href="classwx_drop_target.html">wxDropTarget</a> object if it accepts the data. For this, a <a class="el" href="classwx_data_object.html">wxDataObject</a> must be associated with the drop target and this data object will be responsible for the format negotiation between the drag source and the drop target. If all goes well, then <a class="el" href="classwx_drop_target.html#5c27f66d59eb89ab7e014fd153ace093">wxDropTarget::OnData</a> will get called and the <a class="el" href="classwx_data_object.html">wxDataObject</a> belonging to the drop target can get filled with data.</li>
</ul>
<ul>
<li><b>The end</b>: After processing the data, DoDragDrop() returns either wxDragCopy or wxDragMove depending on the state of the keys Ctrl, Shift and Alt at the moment of the drop. There is currently no way for the drop target to change this return code. </li>
</ul>
</div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org/" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Sat Sep 6 10:17:56 2008</tt> by <a href="http://www.doxygen.org/">Doxygen</a> 1.5.6</p></td>
    <td valign="middle" align="right"><p>[ <a href="wsdindex.html#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-794025-2");
    pageTracker._initData();
    pageTracker._trackPageview();
</script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
