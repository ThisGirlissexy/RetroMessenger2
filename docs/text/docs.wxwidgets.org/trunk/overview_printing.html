<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: Printing Framework Overview</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Sat Sep 6 10:17:57 2008"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">wxWidgets 2.9.0: A portable C++ GUI toolkit</a>&nbsp;&raquo&nbsp;<a class="el" href="page_topics.html">Topic Overviews</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="overview_printing">Printing Framework Overview </a></h1>Classes: <ul>
<li><a class="el" href="classwx_printout.html">wxPrintout</a> </li>
<li><a class="el" href="classwx_printer.html">wxPrinter</a> </li>
<li><a class="el" href="classwx_print_preview.html">wxPrintPreview</a> </li>
<li><a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a> </li>
<li><a class="el" href="classwx_post_script_d_c.html">wxPostScriptDC</a> </li>
<li><a class="el" href="classwx_print_dialog.html">wxPrintDialog</a> </li>
<li><a class="el" href="classwx_print_data.html">wxPrintData</a> </li>
<li><a class="el" href="classwx_print_dialog_data.html">wxPrintDialogData</a> </li>
<li><a class="el" href="classwx_page_setup_dialog.html">wxPageSetupDialog</a> </li>
<li><a class="el" href="classwx_page_setup_dialog_data.html">wxPageSetupDialogData</a></li>
</ul>
<ul>
<li><a class="el" href="overview_printing.html#overview_printing_printout">wxPrintout</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_printer">wxPrinter</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_printpreview">wxPrintPreview</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_printerdc">wxPrinterDC</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_postscriptdc">wxPostScriptDC</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_printdialog">wxPrintDialog</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_printdata">wxPrintData</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_printdialogdata">wxPrintDialogData</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_pagesetupdialog">wxPageSetupDialog</a> </li>
<li><a class="el" href="overview_printing.html#overview_printing_pagesetupdialogdata">wxPageSetupDialogData</a></li>
</ul>
<hr>
<p>
The printing framework relies on the application to provide classes whose member functions can respond to particular requests, such as 'print this page' or 'does this page exist in the document?'. This method allows wxWidgets to take over the housekeeping duties of turning preview pages, calling the print dialog box, creating the printer device context, and so on: the application can concentrate on the rendering of the information onto a device context.<p>
In most cases, the only class you will need to derive from is <a class="el" href="classwx_printout.html">wxPrintout</a>; all others will be used as-is.<p>
A brief description of each class's role and how they work together follows.<p>
For the special case of printing under Unix, where various different printing backends have to be offered, please have a look at <a class="el" href="overview_unixprinting.html">Printing Under Unix (GTK+)</a>.<h2><a class="anchor" name="overview_printing_printout">
wxPrintout</a></h2>
A document's printing ability is represented in an application by a derived <a class="el" href="classwx_printout.html">wxPrintout</a> class. This class prints a page on request, and can be passed to the Print function of a <a class="el" href="classwx_printer.html">wxPrinter</a> object to actually print the document, or can be passed to a <a class="el" href="classwx_print_preview.html">wxPrintPreview</a> object to initiate previewing. The following code (from the printing sample) shows how easy it is to initiate printing, previewing and the print setup dialog, once the <a class="el" href="classwx_printout.html">wxPrintout</a> functionality has been defined. Notice the use of MyPrintout for both printing and previewing. All the preview user interface functionality is taken care of by wxWidgets. For more details on how MyPrintout is defined, please look at the printout sample code.<p>
<div class="fragment"><pre class="fragment"><span class="keywordflow">case</span> WXPRINT_PRINT:
{
    <a class="code" href="classwx_printer.html">wxPrinter</a> printer;
    MyPrintout printout(<span class="stringliteral">"My printout"</span>);
    printer.<a class="code" href="classwx_printer.html#72a5a0a8161314a337285a42c03464af">Print</a>(<span class="keyword">this</span>, &amp;printout, <span class="keyword">true</span>);
    <span class="keywordflow">break</span>;
}
<span class="keywordflow">case</span> WXPRINT_PREVIEW:
{
    <span class="comment">// Pass two printout objects: for preview, and possible printing.</span>
    <a class="code" href="classwx_print_preview.html">wxPrintPreview</a> *preview = <span class="keyword">new</span> <a class="code" href="classwx_print_preview.html">wxPrintPreview</a>(<span class="keyword">new</span> MyPrintout, <span class="keyword">new</span> MyPrintout);
    <a class="code" href="classwx_preview_frame.html">wxPreviewFrame</a> *frame = <span class="keyword">new</span> <a class="code" href="classwx_preview_frame.html">wxPreviewFrame</a>(preview, <span class="keyword">this</span>,
                                               <span class="stringliteral">"Demo Print Preview"</span>,
                                               <a class="code" href="classwx_point.html">wxPoint</a>(100, 100),
                                               <a class="code" href="classwx_size.html">wxSize</a>(600, 650));
    frame-&gt;<a class="code" href="classwx_frame.html#39b18ed552aabaf2a1bc4af7cc924a0f">Centre</a>(wxBOTH);
    frame-&gt;<a class="code" href="classwx_preview_frame.html#d31628ffabb2b5b0381a4fd22b30a068">Initialize</a>();
    frame-&gt;<a class="code" href="classwx_window.html#7fbc92ce240a8d4f6956b6e0276ef07f">Show</a>(<span class="keyword">true</span>);
    <span class="keywordflow">break</span>;
}
</pre></div><p>
<a class="el" href="classwx_printout.html">wxPrintout</a> assembles the printed page and (using your subclass's overrides) writes requested pages to a <a class="el" href="classwx_d_c.html">wxDC</a> that is passed to it. This <a class="el" href="classwx_d_c.html">wxDC</a> could be a <a class="el" href="classwx_memory_d_c.html">wxMemoryDC</a> (for displaying the preview image on-screen), a <a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a> (for printing under MSW and Mac), or a <a class="el" href="classwx_post_script_d_c.html">wxPostScriptDC</a> (for printing under GTK or generating PostScript output).<p>
The <a class="el" href="overview_docview.html">document/view framework</a> creates a default <a class="el" href="classwx_printout.html">wxPrintout</a> object for every view, calling <a class="el" href="classwx_view.html#d3ddc51468a727de8ac88eb67759a78b">wxView::OnDraw()</a> to achieve a prepackaged print/preview facility.<p>
If your window classes have a Draw(wxDC *dc) routine to do screen rendering, your <a class="el" href="classwx_printout.html">wxPrintout</a> subclass will typically call those routines to create portions of the image on your printout. Your <a class="el" href="classwx_printout.html">wxPrintout</a> subclass can also make its own calls to its <a class="el" href="classwx_d_c.html">wxDC</a> to draw headers, footers, page numbers, etc.<p>
The scaling of the drawn image typically differs from the screen to the preview and printed images. This class provides a set of routines named FitThisSizeToXXX(), MapScreenSizeToXXX(), and GetLogicalXXXRect, which can be used to set the user scale and origin of the wxPrintout's DC so that your class can easily map your image to the printout withough getting into the details of screen and printer PPI and scaling. See the printing sample for examples of how these routines are used.<h2><a class="anchor" name="overview_printing_printer">
wxPrinter</a></h2>
Class <a class="el" href="classwx_printer.html">wxPrinter</a> encapsulates the platform-dependent print function with a common interface. In most cases, you will not need to derive a class from <a class="el" href="classwx_printer.html">wxPrinter</a>; simply create a <a class="el" href="classwx_printer.html">wxPrinter</a> object in your Print function as in the example above.<h2><a class="anchor" name="overview_printing_printpreview">
wxPrintPreview</a></h2>
Class <a class="el" href="classwx_print_preview.html">wxPrintPreview</a> manages the print preview process. Among other things, it constructs the wxDCs that get passed to your <a class="el" href="classwx_printout.html">wxPrintout</a> subclass for printing and manages the display of multiple pages, a zoomable preview image, and so forth. In most cases you will use this class as-is, but you can create your own subclass, for example, to change the layout or contents of the preview window.<h2><a class="anchor" name="overview_printing_printerdc">
wxPrinterDC</a></h2>
Class <a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a> is the <a class="el" href="classwx_d_c.html">wxDC</a> that represents the actual printed page under MSW and Mac. During printing, an object of this class will be passed to your derived <a class="el" href="classwx_printout.html">wxPrintout</a> object to draw upon. The size of the <a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a> will depend on the paper orientation and the resolution of the printer.<p>
There are two important rectangles in printing: the <em>page rectangle</em> defines the printable area seen by the application, and under MSW and Mac, it is the printable area specified by the printer. (For PostScript printing, the page rectangle is the entire page.) The inherited function <a class="el" href="classwx_d_c.html#b4c22c7c7490a4aabc13dfd9e7a285a3">wxDC::GetSize()</a> returns the page size in device pixels. The point (0,0) on the <a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a> represents the top left corner of the page rectangle; that is, the page rect is given by wxRect(0, 0, w, h), where (w,h) are the values returned by GetSize.<p>
The <em>paper rectangle</em>, on the other hand, represents the entire paper area including the non-printable border. Thus, the coordinates of the top left corner of the paper rectangle will have small negative values, while the width and height will be somewhat larger than that of the page rectangle. The wxPrinterDC-specific function <a class="el" href="classwx_printer_d_c.html#82e360d0cfc34558ef4a2ae93aaf7934">wxPrinterDC::GetPaperRect()</a> returns the paper rectangle of the given <a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a>.<h2><a class="anchor" name="overview_printing_postscriptdc">
wxPostScriptDC</a></h2>
Class <a class="el" href="classwx_post_script_d_c.html">wxPostScriptDC</a> is the <a class="el" href="classwx_d_c.html">wxDC</a> that represents the actual printed page under GTK and other PostScript printing. During printing, an object of this class will be passed to your derived <a class="el" href="classwx_printout.html">wxPrintout</a> object to draw upon. The size of the <a class="el" href="classwx_post_script_d_c.html">wxPostScriptDC</a> will depend upon the <a class="el" href="classwx_print_data.html">wxPrintData</a> used to construct it.<p>
Unlike a <a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a>, there is no distinction between the page rectangle and the paper rectangle in a <a class="el" href="classwx_post_script_d_c.html">wxPostScriptDC</a>; both rectangles are taken to represent the entire sheet of paper.<h2><a class="anchor" name="overview_printing_printdialog">
wxPrintDialog</a></h2>
Class <a class="el" href="classwx_print_dialog.html">wxPrintDialog</a> puts up the standard print dialog, which allows you to select the page range for printing (as well as many other print settings, which may vary from platform to platform). You provide an object of type <a class="el" href="classwx_print_dialog_data.html">wxPrintDialogData</a> to the <a class="el" href="classwx_print_dialog.html">wxPrintDialog</a> at construction, which is used to populate the dialog.<h2><a class="anchor" name="overview_printing_printdata">
wxPrintData</a></h2>
Class <a class="el" href="classwx_print_data.html">wxPrintData</a> is a subset of <a class="el" href="classwx_print_dialog_data.html">wxPrintDialogData</a> that is used (internally) to initialize a <a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a> or <a class="el" href="classwx_post_script_d_c.html">wxPostScriptDC</a>. (In fact, a <a class="el" href="classwx_print_data.html">wxPrintData</a> is a data member of a <a class="el" href="classwx_print_dialog_data.html">wxPrintDialogData</a> and a <a class="el" href="classwx_page_setup_dialog_data.html">wxPageSetupDialogData</a>). Essentially, <a class="el" href="classwx_print_data.html">wxPrintData</a> contains those bits of information from the two dialogs necessary to configure the <a class="el" href="classwx_printer_d_c.html">wxPrinterDC</a> or <a class="el" href="classwx_post_script_d_c.html">wxPostScriptDC</a> (e.g., size, orientation, etc.). You might wish to create a global instance of this object to provide call-to-call persistence to your application's print settings.<h2><a class="anchor" name="overview_printing_printdialogdata">
wxPrintDialogData</a></h2>
Class <a class="el" href="classwx_print_dialog_data.html">wxPrintDialogData</a> contains the settings entered by the user in the print dialog. It contains such things as page range, number of copies, and so forth. In most cases, you won't need to access this information; the framework takes care of asking your <a class="el" href="classwx_printout.html">wxPrintout</a> derived object for the pages requested by the user.<h2><a class="anchor" name="overview_printing_pagesetupdialog">
wxPageSetupDialog</a></h2>
Class <a class="el" href="classwx_page_setup_dialog.html">wxPageSetupDialog</a> puts up the standard page setup dialog, which allows you to specify the orientation, paper size, and related settings. You provide it with a <a class="el" href="classwx_page_setup_dialog_data.html">wxPageSetupDialogData</a> object at intialization, which is used to populate the dialog; when the dialog is dismissed, this object contains the settings chosen by the user, including orientation and/or page margins.<p>
Note that on Macintosh, the native page setup dialog does not contain entries that allow you to change the page margins. You can use the Mac-specific class wxMacPageMarginsDialog (which, like <a class="el" href="classwx_page_setup_dialog.html">wxPageSetupDialog</a>, takes a <a class="el" href="classwx_page_setup_dialog_data.html">wxPageSetupDialogData</a> object in its constructor) to provide this capability; see the printing sample for an example.<h2><a class="anchor" name="overview_printing_pagesetupdialogdata">
wxPageSetupDialogData</a></h2>
Class <a class="el" href="classwx_page_setup_dialog_data.html">wxPageSetupDialogData</a> contains settings affecting the page size (paper size), orientation, margins, and so forth. Note that not all platforms populate all fields; for example, the MSW page setup dialog lets you set the page margins while the Mac setup dialog does not.<p>
You will typically create a global instance of each of a <a class="el" href="classwx_print_data.html">wxPrintData</a> and <a class="el" href="classwx_page_setup_dialog_data.html">wxPageSetupDialogData</a> at program initiation, which will contain the default settings provided by the system. Each time the user calls up either the <a class="el" href="classwx_print_dialog.html">wxPrintDialog</a> or the <a class="el" href="classwx_page_setup_dialog.html">wxPageSetupDialog</a>, you pass these data structures to initialize the dialog values and to be updated by the dialog. The framework then queries these data structures to get information like the printed page range (from the <a class="el" href="classwx_print_dialog_data.html">wxPrintDialogData</a>) or the paper size and/or page orientation (from the <a class="el" href="classwx_page_setup_dialog_data.html">wxPageSetupDialogData</a>). </div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org/" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Sat Sep 6 10:17:57 2008</tt> by <a href="http://www.doxygen.org/">Doxygen</a> 1.5.6</p></td>
    <td valign="middle" align="right"><p>[ <a href="wsdindex.html#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-794025-2");
    pageTracker._initData();
    pageTracker._trackPageview();
</script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
