<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: wxValidator Overview</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Sat Sep 6 10:17:58 2008"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">wxWidgets 2.9.0: A portable C++ GUI toolkit</a>&nbsp;&raquo&nbsp;<a class="el" href="page_topics.html">Topic Overviews</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="overview_validator"><a class="el" href="classwx_validator.html">wxValidator</a> Overview </a></h1>Classes: <a class="el" href="classwx_validator.html">wxValidator</a>, <a class="el" href="classwx_text_validator.html">wxTextValidator</a>, <a class="el" href="classwx_generic_validator.html">wxGenericValidator</a><p>
The aim of the validator concept is to make dialogs very much easier to write. A validator is an object that can be plugged into a control (such as a <a class="el" href="classwx_text_ctrl.html">wxTextCtrl</a>), and mediates between C++ data and the control, transferring the data in either direction and validating it. It also is able to intercept events generated by the control, providing filtering behaviour without the need to derive a new control class.<p>
You can use a stock validator, such as <a class="el" href="classwx_text_validator.html">wxTextValidator</a> (which does text control data transfer, validation and filtering) and <a class="el" href="classwx_generic_validator.html">wxGenericValidator</a> (which does data transfer for a range of controls); or you can write your own.<p>
<ul>
<li><a class="el" href="overview_validator.html#overview_validator_example">Example</a> </li>
<li><a class="el" href="overview_validator.html#overview_validator_anatomy">Anatomy of a Validator</a> </li>
<li><a class="el" href="overview_validator.html#overview_validator_dialogs">How Validators Interact with Dialogs</a></li>
</ul>
<hr>
<h2><a class="anchor" name="overview_validator_example">
Example</a></h2>
Here is an example of <a class="el" href="classwx_text_validator.html">wxTextValidator</a> usage.<p>
<div class="fragment"><pre class="fragment"><a class="code" href="classwx_text_ctrl.html">wxTextCtrl</a> *txt1 = <span class="keyword">new</span> <a class="code" href="classwx_text_ctrl.html">wxTextCtrl</a>(
    <span class="keyword">this</span>, -1, <a class="code" href="group__group__funcmacro__string.html#g437ea6ba615b75dac8603e96ec864160">wxT</a>(<span class="stringliteral">""</span>), <a class="code" href="classwx_point.html">wxPoint</a>(10, 10), <a class="code" href="classwx_size.html">wxSize</a>(100, 80), 0,
    <a class="code" href="classwx_text_validator.html">wxTextValidator</a>(wxFILTER_ALPHA, &amp;g_data.m_string));
</pre></div><p>
In this example, the text validator object provides the following functionality:<p>
<ul>
<li>It transfers the value of g_data.m_string (a <a class="el" href="classwx_string.html">wxString</a> variable) to the <a class="el" href="classwx_text_ctrl.html">wxTextCtrl</a> when the dialog is initialised. </li>
<li>It transfers the <a class="el" href="classwx_text_ctrl.html">wxTextCtrl</a> data back to this variable when the dialog is dismissed. </li>
<li>It filters input characters so that only alphabetic characters are allowed.</li>
</ul>
The validation and filtering of input is accomplished in two ways. When a character is input, <a class="el" href="classwx_text_validator.html">wxTextValidator</a> checks the character against the allowed filter flag (wxFILTER_ALPHA in this case). If the character is inappropriate, it is vetoed (does not appear) and a warning beep sounds. The second type of validation is performed when the dialog is about to be dismissed, so if the default string contained invalid characters already, a dialog box is shown giving the error, and the dialog is not dismissed.<h2><a class="anchor" name="overview_validator_anatomy">
Anatomy of a Validator</a></h2>
A programmer creating a new validator class should provide the following functionality.<p>
A validator constructor is responsible for allowing the programmer to specify the kind of validation required, and perhaps a pointer to a C++ variable that is used for storing the data for the control. If such a variable address is not supplied by the user, then the validator should store the data internally.<p>
The <a class="el" href="classwx_validator.html#be48368bac7f540f0c20b1436e5c71af">wxValidator::Validate</a> member function should return <span class="literal">true</span> if the data in the control (not the C++ variable) is valid. It should also show an appropriate message if data was not valid.<p>
The <a class="el" href="classwx_validator.html#a09f9ae3bace5de7a8e577206b75aeae">wxValidator::TransferToWindow</a> member function should transfer the data from the validator or associated C++ variable to the control.<p>
The <a class="el" href="classwx_validator.html#cffa9472b2f741ab29dbfad3b80934da">wxValidator::TransferFromWindow</a> member function should transfer the data from the control to the validator or associated C++ variable.<p>
There should be a copy constructor, and a <a class="el" href="classwx_validator.html#25a4e0250afe9451059fd7a967c4883f">wxValidator::Clone</a> function which returns a copy of the validator object. This is important because validators are passed by reference to window constructors, and must therefore be cloned internally.<p>
You can optionally define event handlers for the validator, to implement filtering. These handlers will capture events before the control itself does. For an example implementation, see the <a class="el" href="valtext_8h.html">valtext.h</a> and valtext.cpp files in the wxWidgets library.<h2><a class="anchor" name="overview_validator_dialogs">
How Validators Interact with Dialogs</a></h2>
For validators to work correctly, validator functions must be called at the right times during dialog initialisation and dismissal.<p>
When a <a class="el" href="classwx_dialog.html#0fbdfe37aba39ff1f451c68728f48975">wxDialog::Show</a> is called (for a modeless dialog) or <a class="el" href="classwx_dialog.html#b4281a68b90b3ad0caeb405d2a297a63">wxDialog::ShowModal</a> is called (for a modal dialog), the function <a class="el" href="classwx_window.html#62094872b73c4ad2cc070cc07f9f2096">wxWindow::InitDialog</a> is automatically called. This in turn sends an initialisation event to the dialog. The default handler for the wxEVT_INIT_DIALOG event is defined in the <a class="el" href="classwx_window.html">wxWindow</a> class to simply call the function <a class="el" href="classwx_window.html#88cc65e424a129d9b0057756cdb67ec9">wxWindow::TransferDataToWindow</a>. This function finds all the validators in the window's children and calls the TransferToWindow function for each. Thus, data is transferred from C++ variables to the dialog just as the dialog is being shown.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>If you are using a window or panel instead of a dialog, you will need to call <a class="el" href="classwx_window.html#62094872b73c4ad2cc070cc07f9f2096">wxWindow::InitDialog</a> explicitly before showing the window.</dd></dl>
When the user clicks on a button, for example the OK button, the application should first call <a class="el" href="classwx_window.html#c87f253253a0c5eb498871c83afa40fd">wxWindow::Validate</a>, which returns <span class="literal">false</span> if any of the child window validators failed to validate the window data. The button handler should return immediately if validation failed. Secondly, the application should call <a class="el" href="classwx_window.html#b8e51f36e7d8790b361c8d8c6f37b1ad">wxWindow::TransferDataFromWindow</a> and return if this failed. It is then safe to end the dialog by calling EndModal (if modal) or Show (if modeless).<p>
In fact, <a class="el" href="classwx_dialog.html">wxDialog</a> contains a default command event handler for the wxID_OK button. It goes like this:<p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> wxDialog::OnOK(wxCommandEvent&amp; event)
{
    <span class="keywordflow">if</span> ( <a class="code" href="classwx_window.html#c87f253253a0c5eb498871c83afa40fd">Validate</a>() &amp;&amp; <a class="code" href="classwx_window.html#b8e51f36e7d8790b361c8d8c6f37b1ad">TransferDataFromWindow</a>() )
    {
        <span class="keywordflow">if</span> ( <a class="code" href="classwx_dialog.html#4f3f4dd980758b5b4a1b0afd19da5176">IsModal</a>() )
            <a class="code" href="classwx_dialog.html#156424dd3263f856beb2bc049f2d0b60">EndModal</a>(wxID_OK);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="classwx_dialog.html#0d04ed85ac5cd271a61514d446340673">SetReturnCode</a>(wxID_OK);
            this-&gt;<a class="code" href="classwx_dialog.html#0fbdfe37aba39ff1f451c68728f48975">Show</a>(<span class="keyword">false</span>);
        }
    }
}
</pre></div><p>
So if using validators and a normal OK button, you may not even need to write any code for handling dialog dismissal.<p>
If you load your dialog from a resource file, you will need to iterate through the controls setting validators, since validators can't be specified in a dialog resource. </div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org/" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Sat Sep 6 10:17:58 2008</tt> by <a href="http://www.doxygen.org/">Doxygen</a> 1.5.6</p></td>
    <td valign="middle" align="right"><p>[ <a href="wsdindex.html#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-794025-2");
    pageTracker._initData();
    pageTracker._trackPageview();
</script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
